<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reading {{ novel }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/reader.css') }}" rel="stylesheet">
</head>
<body class="d-flex justify-content-center align-items-center vh-100 theme-dark" id="page">
<div class="text-center container">
    <h2 class="mb-4">{{ novel }} — {{ chapter }}</h2>
    <div id="text-box" class="card card-custom bg-dark text-light border-light shadow p-4 mb-4" style="max-width: 100%; height: 500px;">
        <p id="sentence-text" class="fs-5 mb-0">{{ sentence }}</p>
    </div>
    <div class="mb-3">
        <small id="progress-label">Sentence 1 of 1</small>
        <div class="progress mb-2" style="max-width: 700px; margin: auto;">
            <div class="progress-bar bg-info" role="progressbar" id="sentence-progress-bar" style="width: 0%"></div>
        </div>
        <small id="chapter-progress-label">Chapter 1 of 1</small>
        <div class="progress" style="max-width: 700px; margin: auto; height: 6px;">
            <div class="progress-bar bg-success" role="progressbar" id="chapter-progress-bar" style="width: 0%"></div>
        </div>
    </div>
    <div class="mb-3">
        <label for="chapterSelect" class="form-label">Chapters</label>
        <select class="form-select bg-dark text-light" id="chapterSelect" style="max-width: 200px;">
            {% for c in chapters %}
                <option value="{{ c }}" {% if c == chapter %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="d-flex justify-content-center gap-3 mb-3">
        <a href="#" id="prevBtn" class="btn btn-outline-light">← Previous</a>
        <a href="#" id="nextBtn" class="btn btn-outline-light">Next →</a>
    </div>
    <button class="btn btn-secondary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#settingsPanel">
        Settings
    </button>
    <div class="collapse" id="settingsPanel">
        <div class="card card-body bg-dark text-light border-light mb-4" style="max-width: 700px; margin: 0 auto;">
            <form id="settingsForm">
                <div class="mb-3">
                    <label for="bgColor" class="form-label">Text Box Background</label>
                    <input type="color" class="form-control form-control-color" id="bgColor">
                </div>
                <div class="mb-3">
                    <label for="textColor" class="form-label">Text Color</label>
                    <input type="color" class="form-control form-control-color" id="textColor">
                </div>
                <div class="mb-3">
                    <label for="fontSize" class="form-label">Font Size</label>
                    <input type="range" class="form-range" id="fontSize" min="12" max="36">
                </div>
                <div class="mb-3">
                    <label for="fontFamily" class="form-label">Font Family</label>
                    <select class="form-select bg-dark text-light" id="fontFamily">
                        <option value="serif">Serif</option>
                        <option value="sans-serif" selected>Sans-serif</option>
                        <option value="monospace">Monospace</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                </div>
                <div class="form-check form-switch mb-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="themeSwitch">
                    <label class="form-check-label" for="themeSwitch">Dark Mode</label>
                </div>
            </form>
        </div>
    </div>
    <a href="/" class="btn btn-outline-secondary">Back to Selection</a>
</div>
<div class="modal fade" id="endModal" tabindex="-1" aria-labelledby="endModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light border-secondary">
            <div class="modal-header">
                <h5 class="modal-title" id="endModalLabel">End of Novel</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                You've finished reading <strong>{{ novel }}</strong> — congratulations!
            </div>
            <div class="modal-footer">
                <a href="/" class="btn btn-outline-light">Back to Library</a>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/reader.js') }}"></script>
</body>
</html>